//
//  InsiteSafetyView.swift
//  DailyReport V1
//
//  Created by Satoshi Mitsumori on 5/6/24.
//

import Foundation
import SwiftUI

struct InsiteSafetyView: View {
    @State var insiteSafety: InsiteSafetyModel
    @State private var searchText: String = ""
    
    
    var insiteCollections: [InsiteSafetyModel] {
        return [InsiteSafetyModel(title: "Minimum PPE", subtitle: "Potential Hazards", description: "Falling Tools/equipment from height, noise and dust. Crystalline Silica Vibration burns, irrigation, grout hot works, chemical. Flying debris Cuts, grazes, slips, trips and falls", hazardControltitle: "Hazard Control & Measures", controlMeasure: "Hard Hats, Safety Glasses, Hi-vis Vests or Equivalent, Safety Toe Boots, Long Pants and 4 inch minumum sleeves, task appropriate gloves", controlMeasure2: "", jobphoto: "minimum ppe"), InsiteSafetyModel(title: "Hot Work (Welding, Air Arc, Hardfacing, Torching, Cutting", description: "Fires, Burns, Flying Debris, Noise, Respiratory Hazards, Flash Burn", controlMeasure: "Only perform hot work in areas free of combustible materials. Use welding curtains. Cylinders shall be properly stored. Wear hearing protection to protect from slag entering ear canal. Fire extinguishers shall be available during all hot work activities. Restrict access to hot work operation. Inspect welding equiment prior to use", controlMeasure2: "Additional PPE: Welder Gloves, Apron, Mask and Respirator", jobphoto: "hot work"), InsiteSafetyModel(title: "Refueling Equipment", description: "Fire, Burns, Explosions, Spills", controlMeasure: "Equipment must be turned off prior to refueling. Equipment shall not be refueled while operating", controlMeasure2: "", jobphoto: "refueling equipment"), InsiteSafetyModel(title: "Maintaining Swing Radius Protection", description: "Struck by, caught in between, Pinch Points", controlMeasure: "Provide visible demarcation for exclusion zone. Equipment shall not be moved if personnel are in the exclusion zone. Exclusion zone shall not be entered without parameter achknowledgement from the operator. Monitor/achknowledge blind spots of equipment", controlMeasure2: "", jobphoto: "swing radius protection"), InsiteSafetyModel(title: "Equipment and materials delivery", description: "Struct-BY, Caught In-Between, Property Damage", controlMeasure: "Dedicate a route for transport vehicles. Use a dedicated area for loading/unloading vehicles as to not obstruct other traffic or operations. If transport interacts with the public, flaggers to be used. For cement deliveries the following must be verified: operational Pressure relief valves and pressure gauges, rupture disks present. Wheel chocks shall be utilized prior to loading/unloading equipment", controlMeasure2: "", jobphoto: "equipment and material delivery"), InsiteSafetyModel(title: "Loading/Unloading Equipment", description: "Falls, Struck-By, Caught In-Between, Pinch Points, Property Damages, Strains and Sprains.", controlMeasure: "Load and Unloading in the Public domain requires certified flaggers/Banksman. Use approved methods to gain access to the trailer and/or to add/remove rigging from equipment. Use correct access and egress points. Unloading of trucks is to be performed on level ground. Loads must be secured by lifting rigging or to the truck/trailer at all times. Only authorized personnel shall be in vicinity of loading/unloading operations.", controlMeasure2: "Pinch Points -Rigging, shifting equipment, ratchet straps and chain binder", jobphoto: "loading unloading equipment"),  InsiteSafetyModel(title: "Communication with Operating Equipment", description: "Emergency Situations", controlMeasure: "When an operation requires cooperation between multiple operators, use of headsets/radios is required. When using Headphones, operator needs to be aware of surroundings and potential hazards. Establish eye contact with the equipment operator prior to crossing path of equipment", controlMeasure2: "", jobphoto: "communication with operating equipment"), InsiteSafetyModel(title: "Working with your Hands", description: "Pinch Points - Hand Injuries", controlMeasure: "Operators shall always be able to see both hands of ground personnel before moving the machine. Identify pinch points. Use mechanical means while handling casing and associated rigging as much as reasonable possible (keep hands off load). Never place your hands inside moving loads. Use task specific gloves. Keep hands away from moving machinery", controlMeasure2: "", jobphoto: "working with your hands"), InsiteSafetyModel(title: "Air Monitoring", description: "Hazardous Atmosphere", controlMeasure: "Test air quality with a 4-Gas detector before anyone is allowed to enter the hazardous area. 4-Gas gas detector must be left in the hazardous area to provide continual air monitoring while entry operations are being conducted. Continous monitoring, by trained personnel shall be performed while personnel are in the hazardous area. If any internal conditions become hazardous, all personnel must leave until those hazards are abated or removed", controlMeasure2: "", jobphoto: "air monitor"), InsiteSafetyModel(title: "Barge Work/ Pontoon (vessel without an engine)", description: "Fall Hazards, Drowning Hazards", controlMeasure: "All personal must review barge specific safety plan. Access to and from barges will be accomplished by boats or gangways. At least one portable or permanent ladder, which reaches the top of the apron from the water, surface, shall be available. Employees are not allowed to walk along the sides of the barges unless there is a 1.0m ( 3ft) clear walkway, a grab rail or a taunt hand line. It is prohibited to change the position of equipment and materials on vessels, without consulting the owner/captain/qualified engineer of the vessel ", controlMeasure2: "Additional PPE: personal floatation devices, life ring", jobphoto: "barge work"), InsiteSafetyModel(title: "Confined space entry/ Drilled shaft entry", description: "Falls, Engulfment, Struck-By, Hazardous Atmosphere", controlMeasure: "Evaluate space for any Hazardous conditions, permit. Use personal gas monitor if required by permit or local procedures. A means of recue must be in place to extract the entrant if working in a confined space. Affected crew is trained in proper reqsuce procedures and confined space entry. Ensure entrants are trained in self-rescue. ", controlMeasure2: "Additional PPE as needed: Respirator, Retrieval system", jobphoto: "confined space"), InsiteSafetyModel(title: "Confined Space Entry", description: "Falls, Engulfment, Struck-By, Hazardous Atmosphere", controlMeasure: "Evaluate space for any Hazardous conditions, permit. Use personal gas monitor if required by permit or local procedure. A means of rescue must be in place to extract the entrant if working in a confined space. Affected crew is trained in proper rescue procedures and confined space entry. Ensure entrants are trained in self-rescue. Top man of be present at all times during confined space working.", controlMeasure2: "Additional PPE as needed: Respirator, Retrieval System", jobphoto: "confined space entry"), InsiteSafetyModel(title: "Working With Portable Power", description: "Electrocution", controlMeasure: "All generators must be grounded. GFCI protect outlets shall be used. Cords shall be routed away from water and traffic. Never add fuel while the engine is running. Remove defective tools from service. Do not modify or repair the tools. ", controlMeasure2: "", jobphoto: "working with portable power"), InsiteSafetyModel(title: "Hand Drill, Electric Drill Hammer", description: "Electrical Hazard Due to Defective Equipment/Cables or Humid Conditions, Tool Twist from bit jamming, Dust, Noise", controlMeasure: "Protect equipment and chargers from moisture (rain). Allow equipment exposed to moisture to dry out before use. Use a auxillary handle when drilling large holes. Do not exceed max, drill diameter specified in the operating manual. Use safety glasses and hearing protection. Use by trained and approved personnel", controlMeasure2: "", jobphoto: "hand drill electric drill hammer"), InsiteSafetyModel(title: "Angle Grinder", description: "Flying Sparks, Electrical Hazard Due to Defective Equipment/Cables or Humid Conditions, Flying Parts of the Grinder Wheel", controlMeasure: "Pay attention to persons and flammable substances within a radius of 10m (30 ft). Fire extinguisher avaiable in the proximity of the work. Safety googles. Protect equipment from moisture (rain). Visual inspection before use. Do not exceed the maximum speed. Do not tilt the cutting wheel. Do not use cut-off wheels for grinding. Use by trained and approved personel", controlMeasure2: "", jobphoto: "angle grinder"), InsiteSafetyModel(title: "Hand-held Circular Saw & Saw Cutting, Concrete Coring", description: "Hand Injuries, Electrical Hazard Due to Defective Equipment, Cables or Humid Conditions, Workpieces throw back toward the operator, chips, noise, dust", controlMeasure: "Protect equipment from moisture (rain). Additional PPE: Face Shield. Use engineering controls to mitigate respiratory hazards. Watch footing - remove or divert excess water. Utilize proper liftng techniques when lifting equipment, materials and concrete. Mandatory use of hearing protection", controlMeasure2: "Flying debris, Respiratory Hazards, Materials Handling", jobphoto: "hand held circular saw"), InsiteSafetyModel(title: "Jack Hammering", description: "Flying Debris, Respiratory Hazards, Materials Handling, Vibration", controlMeasure: "Additional PPE: face shield, respirator, vibration resistent gloves, metatarsal guards. Use engineering controls to mitigate respiratory hazards. Watch footing- remove or divert excess water. Utilize proper lifting techniques when lifting equipment, materials and concrete. Only work with equipment, that you have been trained and authorized to use. Check that the whipcheck is properly installed.", controlMeasure2: "", jobphoto: "jack hammering"), InsiteSafetyModel(title: "Use of Stihl Chain Saw", description: "Flying Debris, Noise, Dust", controlMeasure: "Qualified personal only. Safety googles or visor to be used. Mandatory hearing protection. If cutting conrete products use dust, maks or water supression, or respiratory protection. Designate area for use of Sthil saw, identify hearing protection using signage and barriers. ", controlMeasure2: "", jobphoto: "use of stihl chain saw"), InsiteSafetyModel(title: "Hot Weather Environments", description: "Heat Cramps, Heat Exhaustion, Heat Stroke.", controlMeasure: "Proper hydration. (Store drinking water near to workplace). Work/rest regimes. Provide factor 50 sun protection cream. Electrolytes (Gatorade, sodium-potassium drink). Energy drinks should be avoided as it can lead to increased heart rate, blood pressure", controlMeasure2: "", jobphoto: "hot weather environments"), InsiteSafetyModel(title: "Cold Weather Environments", description: "Hypothermia, Frostbite", controlMeasure: "Proper clothing for cold, wet, windy conditions. Dress in layers. Keep extra clothing handy in the even clothes get wet. Provide warm, dry shelter for breaks. Environmental monitoring of temperatures. Monitor each other for danger signs. Provide a place to dry and heat clothing.", controlMeasure2: "", jobphoto: "cold weather environments"), InsiteSafetyModel(title: "Use of Hand and Power Tools", description: "Struct By, Lacerations, contusions, crushing, electrocution, hearing damage", controlMeasure: "Additional PPE as needed: face shield, respirator, vibration resistant gloves, hearing protection. Use by trained and approved personnel only. Remove defective tools from service. Use appropriate tools from service. Use appropriate tool for task. All safety guards and secondary handles to be in place. Keep hands free from rotating parts. Remove defect tools from service. Do not modify or repair the tools.", controlMeasure2: "", jobphoto: "use of hand and power tools"), InsiteSafetyModel(title: "Working In Or Around Excavations", description: "Struck-By Equipment, Crushed by Equipment, Struck By Debris, Falls, Engulfment", controlMeasure: "Excavation must be supported. Slope or Shoring/Bracing of the earth walls. Barriers used. Maintain safe distance for equipment and materials storage at top of excavation. Inspect eecavation daily. Maintain proper access/egress. No unauthorized personnel allowed", controlMeasure2: "", jobphoto: "working in or around excavations"), InsiteSafetyModel(title: "Working Near Power Lines", description: "Electric Shock/Electrocution. Additional PPE: Non-conductive taglines", controlMeasure: "Review Site specific protective measures. The voltages of the power lines shall be reviewed with the crew. Prior to operations the work area around equipment shall be identified in a 360 degree perimeter, boundaries shall be visibly marked as per the required safety clearance. Have overhead lines either isolated by the electric power company or disconnected. if not possible, keep safety distances ", controlMeasure2: "", jobphoto: "working near power lines"), InsiteSafetyModel(title: "Ladders", description: "Fall from Height", controlMeasure: "Place the ladder on an even and stable surface. Make sure the leaning ladder extends at least 1m (3 feet) above where you are working. Make sure the ladder angle is at 70 degree, secure foot points. Do not climb above the 3rd last step. Secure the ladder either by helpers or by tying it down. For work on leaning ladders higher than 5m (16 feet) above the surface additional securing required", controlMeasure2: "", jobphoto: "ladders"), InsiteSafetyModel(title: "Cone Penetration Test", description: "CPT Rig Hit to Objects or Person While Traveling, Pinch Point, Ergonomic Hazards, Failure of CPT Rod", controlMeasure: "Trained CPT operator to operate. Use remote controller while traveler to see all blind spot. Get assistance by bankman/CPT helper. Use impact hand gloves and be aware of pinch point while handling rods. Do not press the rod more than allowable capacity. Helper/Operator not to stay in line of fire in case the rod breaks for any reason.", controlMeasure2: "", jobphoto: "cone penetration test"), InsiteSafetyModel(title: "Rod Manipulator Operation", description: "Dropping of Rod/Casing, Hit by Moving Excavator", controlMeasure: "Rod manipulator excavator operation in a controlled access zone. Qualified operator familiar with the task/equipment. No one stay in the line of fire. Maintain rod manipulator clamps daily. Ensure the correct sized clamps for the rods, bars or casings are used", controlMeasure2: "", jobphoto: "rod manipulator operation"), InsiteSafetyModel(title: "Fork Lift Operation", description: "Collision with Structures, loss of load, toppling of forklift", controlMeasure: "Approved operator only. Wear seatbelt. Use appropriate attachment for load. No free rigging. Secure the load. Know the weight of the load and limits of the forklift. Only use recognized access routes, avoiding steep slopes or shar bends or changes in levels. Keep hands off load", controlMeasure2: "", jobphoto: "fork lift operation"), InsiteSafetyModel(title: "Telehandler Operation", description: "Toppling, Hit-by the load", controlMeasure: "Approved operator only. Wear seatbelt. Use appropriate attachment for load. No free rigging. Secure the load. Know the weight of the load and the limits of the forklift. Only use recognized access routes. Avoid steel slopes or sharp bends or changes in levels. Keep hands off load.", controlMeasure2: "", jobphoto: "telehandler operation"), InsiteSafetyModel(title: "Compressor", description: "Electrical hazard if equipment or cable is damaged, fire hazard with combustion engine, exhaust, gas, noise.", controlMeasure: "Visual inspection of equipment before use. Check safety valves, release valves, shut-off devices and pressure gauges regulary. Drain condensate water. Be careful when refilling fuel: Avoid splashing on hot parts. Connect and disconnect hoses only if a compressor is switched off and pressure is released. Secure hoes and coupling so that it will not whip.", controlMeasure2: "", jobphoto: "compressor"), InsiteSafetyModel(title: "Boom & Scissor Lift", description: "Injury caused by lowering the platform, falls", controlMeasure: "Not to stay in the danger area or under a lifted load. Only raise the platform on a firm level surface. Not to exceed maximum load capacity. Moving to another position with the platform rasied is only allowed on the horizontal ground or according to manufacturer's specifications and at the recommended speed. If necessary, secure the lift site against impact. Carried loads must not endanger stability. Use fall protection. Do not stand or climb on the platform guardrails. Review emergency rescue plan.", controlMeasure2: "", jobphoto: "boom scissor lift"), InsiteSafetyModel(title: "Changing Tools (Adding and Removing Rods)", description: "Falls, Struck-By, Pinch Points-> Pin removal/insertion, tool insertion/removal.", controlMeasure: "Personnel shall not access the tool until the operator has given the permission to approach. Tools that are not in use shall be stored in a manner to prevent tipping. Personnel will not stand under suspended tools at any time. Areas in the path of suspended loads will be cleared of any unnecessary equipment or materials. Operator shall not move tool until they are sure ground personnel are clear (Can see both ends of ground personnel)", controlMeasure2: "", jobphoto: "adding and removing rods"), InsiteSafetyModel(title: "Conrete and Grout Removal", description: "Struct-By, Dust, Noise, Chemical Burns", controlMeasure: "Additional PPE: Respirator if required for task, face shield, hearing protection, eye wash in immediate vicinity", controlMeasure2: "Ensure vinegar-water solution is available to neutralize the cement", jobphoto: "concrete and grouting removal"), InsiteSafetyModel(title: "Drill Rig Assembly", description: "Pinch Points, Crushing, Struck-By, Caught-In Between, Electrocution, Ergonomic, Overhead Hazards", controlMeasure: "Only competent identified operator may operate the drill rig assembly. Operator's Manual must be on site for reference. Assemble drill rig to manufacturer specifications. Review lift plan with personnel prior to lift. Route hoses away from heavy traffic areas (vehicle or personnel). Identify hoses with flags or stakes if they have the potential for being covered", controlMeasure2: "", jobphoto: "drill rig assembly"), InsiteSafetyModel(title: "Drilling", description: "Pinch Points, Entanglement, Struck-By, Sprains and Strains, Slips, Trips and Falls", controlMeasure: "Direct eye contact must be maintained between driller and chuck tender when assembling & disassembling rods. Avoids contacting rotating drill steel. Loose clothing, long hair and jewelry that could become entangled in the drill steel must be removed or controlled. Drill operator must not leave the controls at any time when the drill rig is operating. Avoid blowing out air from the head/drill steel in the direction of employees or other personnel with vicinity. Loose objects such as ropes, slings, or power cords must be kept away from rotating equipment. Spoils and hoses should be controlled to prevent tripping injuries. Spoils and hoes should be controlled to prevent tripping injuries. Prior to swining, the path should be free of obstructions and personnel", controlMeasure2: "", jobphoto: "drilling"), InsiteSafetyModel(title: "Erecting Silos & Tanks", description: "Property Damage & Struck-By Crushing", controlMeasure: "Prior to placement ensure the stability and weight bearing capacity of the working platform is adequate for the silo. Inspect for any visual damage of the silo. Identify approved picking points at top of silo (do not pick from railing). Do not place hands on silo/tank when it is being hoisted. Review lift plan with personnel prior to lift. Silos/tanks should only remain empty for a brief period of time. Maintain an adequate distance from overhead lines. Vertical silos will be secured prior to rigging removal. Pads shall be placed under outriggers. When setting up the silo, consider the safe distance from site facilities and traffic routes.", controlMeasure2: "", jobphoto: "erecting silos tanks"), InsiteSafetyModel(title: "Fill Silo With Powder", description: "Struck By, Non-Respirable Dust", controlMeasure: "The truck driver shall be instructed by Keller Representative as to the current silo capacity and unloading procedures to prevent blowouts or other damage. Ensure appropriate connections between truck and silo. Monitor silo while filling to prevent from being overfilled. All tools shall be tethered when climbing silo. Harnesses to be worn if working at height", controlMeasure2: "", jobphoto: "fill silo with powder"),  InsiteSafetyModel(title: "Inserting Anchors Strand & Bar", description: "Struck-By, Caught In-Between, Pinch Points, Strain/Sprain, Impalement, lacerations", controlMeasure: "Use certified sawhorses or similar devices, when necessary to elevate strand/bar/nails to near waist height making up material to be inserted", controlMeasure2: "Pinch Points-> attaching centralizers, grout tube, between bar and casing/hole. When installing anchors with removable couplers, ensure bar is fully threaded and tightened into the coupler prior to exerting any load. Protect protruding end tail of installed strand/bar/nail so it is not impalement hazard. Stay clear or uncoiling tendons and rolling of anchor stock", jobphoto: "inserting anchor strand bar"),  InsiteSafetyModel(title: "Rebar Handling and Assembly", description: "Impalement, Struck By, Lacerations, Strains and Sprains", controlMeasure: "Use certified sawhorses or similar devices, when necessary, to elevate rebar to near waist height when making up material. Protect protruding end (tail) of installed strand/bar/nail so it is not an impalement hazard", controlMeasure2: "", jobphoto: "rebar handling assembly"), InsiteSafetyModel(title: "Use of Crane", description: "Slip, Trips and Falls, Struck-By, Caught In-Between, Equipment Damage", controlMeasure: "Qualified crane operator only. Do not jump off the tracks. Maintain 3 points of contact when climbing. Maintain safe working radius while tracking. Only pick the load as high as you have to.  ", controlMeasure2: "Review and Follow Lift Plan. Ensure only authorized person involved and all personnel out of the line of fire. Check wind speeds prior to lifting", jobphoto: "use of crane"), InsiteSafetyModel(title: "Crane Assembly/Dissembly", description: "Struck-By, Caught Between, Laceration", controlMeasure: "Follow the manufacturer procedures under the direction of a qualified person. Inform crane operator when crew members assisting are out of the operators view. No one is to be allowed under the boom, jib or other components when pins or similar devices are being removed. Blocking material used must sustain loads imposed, maintain stability, and be place to prevent dangerous movement or collapse. No pins are to be removed from any boom while under tension", controlMeasure2: "", jobphoto: "crane assembly dissembly"), InsiteSafetyModel(title: "Underpinning", description: "Slips, Trips and Falls, Collapse, Engulfment, Confined Spoace", controlMeasure: "Approach pits will be dug by a mini-excavator to accommodate a larger work area and spoils/material removal. Material shall be removed from the excavated pit with waste/debris buckets. As the pit is excavated, boards shall be utilized to supprt the excavated area. Only past the approach pit only one row at a time shall be permitted", controlMeasure2: "Pinch Points: Lagging Boards", jobphoto: "underpinning")]
    }

    func basicImageRow(safety: InsiteSafetyModel) -> some View {
        VStack(alignment: .leading, spacing: 5) {
            HStack(spacing: 10) {
                Image(safety.jobphoto)
                    .resizable()
                    .frame(width: 46, height: 46)
                    .cornerRadius(10)
                
                Text(safety.title)
                    .font(.subheadline)
                    .fontWeight(.semibold)
            }
            Divider()
        }
    }
    
    var body: some View {
        NavigationStack {
            ScrollView {
                LazyVStack(alignment: .leading) {
                    ForEach(insiteCollections.sorted(by: {
                        $0.title < $1.title
                    })) { items in
                    NavigationLink(destination: {
                      HazardDetailView(selectedsafety: items)
                    }, label: {
                        basicImageRow(safety: items)
                    })
                        
                    }
                   
                }
            }
            .navigationTitle("Safety Topic Awareness")
            .navigationBarTitleDisplayMode(.inline)
            .navigationBarBackButtonHidden(true)
        }
    }
}
